!function(e){"use strict";e(document).ready(function(){e.YOUZIFY_LP={};var i=/((https?|ftp)\:\/\/)?([a-z0-9+!*(),;?&=\$_.-]+(\:[a-z0-9+!*(),;?&=\$_.-]+)?@)?([a-z0-9-.]*)\.([a-z]{2,3})(\:[0-9]{2,5})?(\/([a-z0-9+\$_\-~@\(\)\%]\.?)+)*\/?(\?[a-z+&\$_.-][a-z0-9;:@&#%=+\/\$_.-]*)?(#[a-z_.-][a-z0-9+\$_.-]*)?/i,t=/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi,a=(Youzify.youzify_url,e("#youzify-wall-form").find(".lp-prepost-container").html());for(var n=document.getElementsByClassName("youzify-wall-textarea"),p=function(i){let t=(i.clipboardData||window.clipboardData).getData("text");e.youzify_get_link_preview_data(e(i.target).closest("form"),t)},o=0;o<n.length;o++)n[o].addEventListener("paste",p,!1);e(document).on("keyup",".youzify-wall-textarea",function(i){13!=i.which&&32!=i.which&&17!=i.which||e.youzify_get_link_preview_data(e(this).closest("form"),e(this).val())}),e(document).on("keyup",".youzify-emojionearea-editor",function(i){e.youzify_get_link_preview_data(e(this).closest("form"),e(this).text())}),e(document).on("change",".lp-preview-no-thubmnail-text input",function(){var i=e(this).closest(".lp-prepost-container");this.checked?i.find(".lp-preview-image").fadeOut(200,function(){i.addClass("youzify-lp-no-thumbnail")}):i.find(".lp-preview-image").fadeIn(200,function(){i.removeClass("youzify-lp-no-thumbnail")})}),e(document).on("click",".lp-button-cancel",function(){e(this).closest(".youzify-lp-prepost").attr("data-loaded",!1),e(this).closest(".lp-prepost-container").fadeOut(200,function(){e(this).html(a).attr("class","lp-prepost-container")})}),e(document).on("click",".lp-preview-title",function(){e(this).fadeOut(200,function(){e(this).closest(".youzify-lp-prepost").find(".lp-preview-replace-title").fadeIn()})}),e(document).on("click",".lp-preview-description",function(){e(this).fadeOut(200,function(){e(this).closest(".youzify-lp-prepost").find(".lp-preview-replace-description").fadeIn()})}),e(document).on("click",".youzify-lp-previous-image",function(){var i=parseInt(e(this).closest(".lp-preview-thubmnail-buttons").attr("data-current"));i<1||e.youzify_update_live_preview_image(e(this).closest(".youzify-lp-prepost"),i-1)}),e(document).on("click",".youzify-lp-next-image",function(){var i=parseInt(e(this).closest(".lp-preview-thubmnail-buttons").attr("data-current"))+1;e.YOUZIFY_LP.images[i]&&e.youzify_update_live_preview_image(e(this).closest(".youzify-lp-prepost"),i)}),e.youzify_update_live_preview_image=function(i,t){i.find('input[name="url_preview_img"]').val(e.YOUZIFY_LP.images[t]),i.find(".lp-preview-image").css("background-image","url("+e.YOUZIFY_LP.images[t]+")"),i.find(".lp-preview-thubmnail-buttons").attr("data-current",t),i.find(".lp-preview-pagination").find(".lp-preview-thubmnail-pagination").text(t+1)},e.youzify_get_link_preview_data=function(a,n){if("activity_comment"!=a.find('input[name="post_type"]').val()&&"true"!=a.find(".youzify-lp-prepost").attr("data-loaded")&&""!=n&&function(e){return i.test(e)}(n)){var p=n.match(i);new RegExp(t).test(p[0])&&(a.find(".youzify-wall-post, .youzify-update-post").attr("disabled",!0),a.find(".lp-loading-text").fadeIn(),a.find(".youzify-lp-prepost").attr("data-loaded",!0),e.ajax({url:ajaxurl,method:"POST",data:{action:"youzify_get_url_live_preview",text:n},headers:{"Content-Type":"application/x-www-form-urlencoded"},success:function(i){i=e.parseJSON(i),e.youzify_set_live_preview_form(a.find(".youzify-lp-prepost"),i),a.find(".youzify-wall-post, .youzify-update-post").attr("disabled",!1)}}))}}}),e.youzify_set_live_preview_form=function(i,t){var a=i.find(".lp-prepost-container"),n={"{{preview.title}}":t.title,"{{preview.site}}":t.site,"{{preview.description}}":t.description,"{{preview.image}}":t.image,"{{thumbnailPaginationText}}":1,"{{thumbnailText}}":t.images?t.images.length:1};e.YOUZIFY_LP.images=t.images,t.image&&i.find(".lp-preview-image").css("background-image","url("+t.image+")").prepend('<input type="hidden" name="url_preview_img" value="'+t.image+'">'),t.link&&i.find(".lp-preview-image").prepend('<input type="hidden" name="url_preview_link" value="'+t.link+'">'),t.site&&i.find(".lp-preview-image").prepend('<input type="hidden" name="url_preview_site" value="'+t.site+'">'),t.title&&i.find(".lp-preview-replace-title-wrap").append('<input type="text" class="lp-preview-replace-title" name="url_preview_title" value="'+t.title+'">'),t.description&&i.find(".lp-preview-replace-description-wrap").append('<textarea name="url_preview_desc" class="lp-no-resize lp-preview-replace-description">'+t.description+"</textarea>"),t.images&&t.images.length<2?a.find(".lp-preview-pagination").remove():a.find(".lp-preview-thubmnail-buttons").attr("data-current",0),0==t.video&&a.find(".lp-preview-video-icon").remove(),e.each(n,function(e,i){var t=new RegExp(e,"g"),n=a.html().replace(t,i);a.html(n)}),t.use_thumbnail&&"on"==t.use_thumbnail&&a.find('input[name="url_preview_use_thumbnail"]').attr("checked",!0).trigger("change"),i.find(".lp-loading-text").fadeOut(200,function(){a.fadeIn()})}}(jQuery);